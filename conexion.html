<!DOCTYPE html>
<html lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=gb18030">
  <title>conexion</title>
 <link href="https://fonts.googleapis.com/css?family=Sedgwick+Ave" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style>
      .titulo{
          font-family: 'Sedgwick Ave', cursive;
      }
      .dato{
          font-size: 20px;
      }
  </style>
</head>
<body background=<?php echo $fondo;?>>
<body>



<div class="container text-center">
  <h2>Conexiones a servidores local desde Pagina Web</h2>
  <p><em>Hace poco se me presentaba la necesidad de conectarme externamente a una base de datos. Para hacernos una idea, se trataba de conectar una aplicación desarrollada en php a una base de datos en MySql almacenada en un equipo de mi red local.


Yo tengo instalado MySql como parte de la aplicación XAMPP. Vamos a declararque en realidad vamos a trabajar con 3 direcciones IP: A la dirección en la que se encuentra la aplicación la llamaremos IP_aplicación; A la dirección IP pública del lugar, aquella con la que nos conectamos a Internet se llamará IP_Pública; Y a la dirección IP del equipo que almacena la base de datos en la red local la llamaremos IP_local.

La IP Pública la da el proveedor de servicios de Internet. Debe ser fija. Supongamos que nos han asignado la dirección 291.58.12.7

Para conseguir la conexión desde el exterior hay que seguir los siguientes pasos

En primer lugar hay que modificar el archivo my.ini que se encuentra en la carpeta bin de mysql. Este archivo contiene la configuración de MySql. Hay que buscar una línea que pone

bind-address = 127.0.0.1

y sustituirla por esta otra:

bind-address = 0.0.0.0

Lo que hemos hecho ha sido decirle a MySql que acepte las conexiones desde cualquier dirección IP.

A continuación debemos modificar el firewall del equipo servidor de la base de datos y abrir los puertos del equipo. El puerto por defecto para MySql es el puerto 3306 (aunque se puede cambiar en el fichero my.ini). Yo siempre recomiendo cambiar el puerto por defecto para no dar pistas.

En tercer lugar debemos abrir el puerto del router para que automáticamente desvíe al equipo que hace de servidor de la base de datos todas las conexiones que se hagan. El lugar en el que se encuentra depende del router en concreto pero suele ser en la opción Firewall, Port Forwarding, NAT… Dentro de la opción hay que rellenar los siguientes campos:

IP remota: Se puede dejar en blanco en caso de que se vaya a hacer las conexiones desde cualquier ordenador de Internet, o bien rellenarla con la dirección IP del ordenador que permitimos que se conecte. A esta la dirección la llamamos antes IP_Aplicación. Por seguridad recomiendo lo segundo, pero obviamente dependerá de las necesidades. En nuestro caso supondremos que nos conectaremos desde cualquier página.

Puertos externos: Aquí habrá que especificar el rango de puertos de entrada a la página. Supongamos que pondremos el puerto 1600 (como dije antes en algunos routers es necesario que coincidan los puertos externos con los puertos internos).

IP Local: Se refiere a la IP del equipo de la red que actúa como servidor de página web. Es la que llamamos anteriormente IP_Local. Supongamos que se encuentra en la dirección ip 192.168.0.25. Debe ser fija.

Puertos locales: Aquí debemos especificar los puertos que abrimos antes en el firewall del equipo. Por defecto es el 3306

El protocolo usado por MySql es TCP.

Supongo que dependerá del router, pero los puertos externos del router deben coincidir con los puertos del equipo local.

El penúltimo paso es dar los permisos a un usuario para que acceda a la base de datos. Lo más intuitivo y fácil es conectarse como root, pero MySql no lo permite (aunque como todo se puede cambiar). Hay que estudiar bien el acceso para no permitir accesos u operaciones innecesarias o que no se vayan a usar. Por ejemplo: Podemos crear un usuario y darle todos los privilegios en todas las tablas de todas las bases de datos desde cualquier lugar, o bien restringirlo dejándole solamente consultar determinadas tablas de una única base de datos desde un único sitio. Ésto último es lo que vamos a hacer. Como este post no tiene como objetivo mostrar el uso del GRANT nos limitaremos a poner el comando directamente:</em></p>
  



<body>
<div class="container text-center">

                         
  <p class="bg-primary">Proyecto Realizado Por Lenington Cantillo. </p>
                       
  
  <a href="/LECTURAS.html" target="_self"><input type="submit" class="btn btn-primary"
                       value="Regresar">
                       </form></div>
                         </div>
 
                         
                         
        </body>
<html>                 
                         
                         
